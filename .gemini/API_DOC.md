# API Documentation Guide

> **This is NOT a traditional API reference document.**
> This guide explains how to access the real-time, auto-generated API documentation for the `cotept` project.

## 1. The Single Source of Truth

**The single source of truth for the API specification is the backend (`apps/api`) source code itself.** Specifically, the `@nestjs/swagger` decorators and comments within the controller (`*.controller.ts`) and DTO (`*.dto.ts`) files define the API.

**DO NOT MANUALLY EDIT THIS DOCUMENT OR ANY OTHER STATIC API DOCUMENTATION.** The project is designed to eliminate out-of-date, static documentation.

## 2. How to Access the API Documentation

There are two primary ways to view and interact with the API specification.

### 2.1. Live, Interactive API Documentation (Recommended)

This method allows you to view all endpoints and execute them directly from your browser. It is the best way to test and understand the API.

1.  **Start the backend server**:
    ```bash
    pnpm dev:api
    ```
2.  **Open your browser** and navigate to the URL provided by the Swagger UI. This is typically `http://localhost:3001/api-docs` (the port may vary based on your `.env` configuration).

### 2.2. Static Specification File

For tools that need to consume the OpenAPI specification, a static file is available.

- **Location**: `packages/api-client/openapi-spec.yaml`
- **Important**: This file is automatically generated. To update it, you must run the `pnpm gen:api` command. Do not edit it by hand.

## 3. How to Use the API in the Frontend

**Frontend developers should rarely, if ever, need to consult the API documentation directly.**

The primary method for interacting with the API is through the auto-generated, type-safe client.

1.  **Ensure the client is up-to-date**: Run `pnpm gen:api`.
2.  **Import and use the client**: Import the necessary service from `@repo/api-client` and use the functions within your TanStack Query hooks (located in `apps/web/src/features/[domain]/api/`).

    ```typescript
    // Example usage in a mutation hook
    import { useBaseMutation } from "@/shared/hooks/useBaseMutation"
    import { authApiService } from "@repo/api-client" // Using the auto-generated client

    export function useLogin(config?: MutationConfig) {
      return useBaseMutation<LoginResponse, ApiError, LoginParams>({
        mutationFn: (data) => authApiService.login(...data), // Type-safe function call
        // ...
      })
    }
    ```

This workflow ensures that any changes in the backend API are immediately reflected as TypeScript errors in the frontend if not handled, preventing a wide class of bugs at compile time.
