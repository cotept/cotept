# CotePT API 현재 아키텍처 분석

이 문서는 현재 CotePT API 프로젝트의 디렉토리 구조와 아키텍처 패턴을 분석하고 요약한 내용입니다.

## 1. 최상위 디렉토리 구조 (`apps/api/src`)

API 서버의 소스 코드는 다음과 같은 최상위 구조를 가집니다.

-   `configs/`: 애플리케이션의 환경 변수, 데이터베이스 설정 등 주요 구성 정보를 관리합니다.
-   `modules/`: 핵심 비즈니스 기능이 모듈 단위로 분리되어 위치합니다.
-   `shared/`: 여러 모듈에서 공통으로 사용하는 코드(인프라, 유틸리티 등)를 관리합니다.
-   `swagger/`: API 문서 자동화를 위한 Swagger/OpenAPI 관련 설정을 담당합니다.
-   `types/`: 프로젝트 전반에서 사용되는 공통 타입 정의를 관리합니다.
-   `app.module.ts`, `app.controller.ts`, `app.service.ts`: NestJS의 루트 모듈 및 기본 구성 요소입니다.
-   `main.ts`: 애플리케이션의 시작점(entry point)입니다.

## 2. 기능 모듈 (`modules`)

비즈니스 기능은 다음 모듈들로 명확하게 분리되어 있습니다.

-   `auth`: 인증/인가 (로그인, JWT 등) 기능을 담당합니다.
-   `baekjoon`: 백준 온라인 저지 연동 관련 기능을 담당합니다.
-   `mail`: 이메일 발송과 같은 알림 기능을 담당합니다.
-   `user`: 사용자 정보 관리 등 핵심 사용자 기능을 담당합니다.

## 3. 공유 모듈 (`shared`)

모듈 간의 코드 중복을 피하고 재사용성을 높이기 위한 공유 모듈입니다.

-   `infrastructure/`: 공통 데이터베이스 로직, 외부 API 클라이언트 등 공통 인프라 코드를 포함합니다.
-   `types/`: 공통으로 사용되는 TypeScript 타입을 정의합니다.
-   `utils/`: 날짜 변환, 포맷팅 등 순수 함수 유틸리티를 포함합니다.
-   `shared.module.ts`: 위 기능들을 NestJS 모듈로 묶어 다른 기능 모듈에 제공하는 역할을 합니다.

## 4. 모듈 내 아키텍처 패턴 (Hexagonal Architecture)

각 기능 모듈 (예: `user` 모듈) 내부는 **헥사고날 아키텍처(Hexagonal Architecture)** 또는 **클린 아키텍처(Clean Architecture)** 원칙을 따르는 것으로 보입니다.

-   `domain/`: 순수한 비즈니스 로직과 데이터 모델(도메인 객체), 그리고 인터페이스(Port)를 정의하는 핵심 영역입니다. 외부 프레임워크나 기술에 의존하지 않습니다.
-   `application/`: `domain`을 활용하여 실제 비즈니스 로직의 흐름(Use Case)을 구현합니다.
-   `infrastructure/`: 데이터베이스 연동, 외부 API 호출 등 기술적인 세부 구현(Adapter)을 담당합니다. `domain`에 정의된 인터페이스(Port)를 구현합니다.

## 5. 종합 평가

현재 API 프로젝트는 다음과 같은 특징을 가진 잘 설계된 구조입니다.

-   **모듈성 (Modularity)**: 기능 단위로 코드가 분리되어 있어 유지보수와 확장이 용이합니다.
-   **관심사 분리 (Separation of Concerns)**: 헥사고날 패턴을 통해 비즈니스 로직과 기술 구현이 명확하게 분리되어 있습니다.
-   **재사용성 (Reusability)**: `shared` 모듈을 통해 공통 코드를 효율적으로 관리합니다.

이 분석 내용을 바탕으로 새로운 아키텍처 문서를 작성하는 것을 추천합니다.
